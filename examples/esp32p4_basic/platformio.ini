; ESP32-P4 Example with ESP-IDF Framework
; This configuration works better with ESP32-P4 hardware

[env:m5tab5_espidf]
platform = espressif32@^6.5.0
board = esp32dev
framework = espidf

; Monitor configuration
monitor_speed = 115200
monitor_port = /dev/ttyACM*

; ESP32-P4 build flags
build_flags = 
    -DESP32_P4=1
    -DARDUINO_M5TAB5=1
    -DPSRAM_SIZE_MB=32
    -DFLASH_SIZE_MB=16
    -DCONFIG_LOG_DEFAULT_LEVEL_DEBUG=y
    -DCONFIG_ESP_CONSOLE_UART_DEFAULT=y

; ESP32-P4 board configuration
board_build.flash_mode = qio
board_build.f_cpu = 400000000L
board_build.f_flash = 80000000L
board_build.partitions = default_16MB.csv

; Upload configuration
upload_speed = 460800
upload_protocol = esptool

; Tab5duino-IDF as ESP-IDF component
lib_deps = 
    https://github.com/Paqurin/Tab5duino-idf.git